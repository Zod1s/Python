from random import randrange
from math import log2
from heapsort import heapsort
import time

# data = [randrange(0,10000) for _ in range(4000)]

def Sort(a):
    maxdepth = int(log2(len(a)))
    return introsort(a, maxdepth)

def introsort(a, maxdepth):
    if len(a) <= 1:
        return a
    elif maxdepth == 0:
        a = heapsort(a)
        return a
    else:
        pivot_index = randrange(0, len(a))
        pivot_element = a[pivot_index]
        left = [_ for i, _ in enumerate(a) if _ <= pivot_element and i != pivot_index]
        right = [_ for i, _ in enumerate(a) if _ > pivot_element and i != pivot_index]
        left = introsort(left, maxdepth - 1)
        right = introsort(right, maxdepth - 1)
        left.append(pivot_element)
        left.extend(right)
        return left

start = time.clock()
data = [274, 123, 309, 537, 203, 502, 508, 942, 810, 181, 288, 444, 286, 30, 692, 142, 748, 161, 7, 537, 269, 281, 
    834, 536, 369, 695, 525, 438, 71, 68, 620, 143, 148, 539, 387, 596, 330, 657, 606, 771, 240, 308, 695, 720, 291, 
    32, 290, 707, 199, 524, 247, 750, 530, 335, 540, 875, 587, 865, 533, 631, 6, 331, 161, 414, 960, 819, 371, 564, 429, 
    125, 230, 874, 533, 836, 313, 692, 982, 860, 952, 654, 608, 452, 703, 577, 643, 743, 302, 24, 955, 215, 135, 108, 123, 
    411, 258, 779, 295, 138, 409, 534, 693, 580, 173, 25, 902, 289, 64, 294, 466, 647, 274, 588, 645, 554, 438, 172, 850, 0, 
    302, 281, 102, 687, 403, 484, 894, 896, 689, 194, 903, 437, 684, 429, 366, 212, 7, 622, 118, 850, 470, 941, 791, 521, 780, 
    546, 689, 768, 557, 818, 879, 962, 507, 114, 277, 619, 931, 80, 453, 325, 619, 863, 588, 86, 639, 402, 436, 837, 391, 246, 
    766, 722, 118, 253, 68, 424, 916, 300, 318, 361, 84, 406, 379, 450, 193, 514, 387, 733, 855, 750, 110, 839, 39, 128, 217, 
    589, 357, 581, 739, 385, 779, 558, 276, 654, 48, 268, 297, 480, 856, 157, 586, 302, 779, 875, 376, 441, 531, 992, 257, 693, 
    784, 128, 89, 849, 54, 463, 490, 521, 188, 869, 701, 46, 799, 407, 604, 723, 777, 114, 316, 921, 652, 470, 707, 383, 140, 284, 
    389, 740, 197, 514, 509, 443, 487, 687, 165, 349, 858, 811, 175, 876, 93, 273, 496, 256, 818, 345, 502, 391, 890, 917, 585, 677, 
    295, 142, 367, 621, 372, 777, 515, 624, 292, 992, 150, 853, 822, 62, 210, 36, 116, 741, 811, 910, 237, 687, 132, 806, 16, 150, 97, 
    69, 707, 783, 919, 359, 333, 953, 356, 275, 719, 65, 651, 469, 633, 48, 721, 46, 795, 132, 563, 312, 733, 38, 102, 633, 563, 512, 
    325, 911, 35, 256, 491, 523, 885, 151, 979, 206, 1, 914, 911, 219, 571, 511, 238, 57, 450, 533, 913, 399, 952, 213, 661, 319, 159, 661, 
    437, 762, 19, 631, 738, 15, 397, 264, 663, 299, 420, 103, 865, 715, 600, 102, 228, 554, 382, 434, 57, 604, 506, 618, 679, 914, 243, 179, 
    103, 325, 425, 447, 414, 373, 190, 309, 339, 318, 536, 797, 868, 534, 328, 70, 668, 121, 223, 261]
sor = Sort(data)
print(sor)
print(time.clock() - start)